
let num = "+598 099 669 085"

function fallbackCopyTextToClipboard(text) {
    var textArea = document.createElement("textarea");
    textArea.value = text;
    // Avoid scrolling to bottom
    textArea.style.top = "0";
    textArea.style.left = "0";
    textArea.style.position = "fixed";
  
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();
  
    try {
      var successful = document.execCommand('copy');
    } catch (err) {
      console.error('Fallback: Oops, unable to copy', err);
    }
  
    document.body.removeChild(textArea);
  }

function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}
function copyNumber(){

    event.stopPropagation()
    var tooltip = document.getElementById("myTooltip");
  tooltip.innerHTML = "Copiado";

  /* Select the text field */


   /* Copy the text inside the text field */

   fallbackCopyTextToClipboard(num)


}

document.addEventListener("click", async function(){
    if(pressed){
        theButton.classList.remove("WAButtonActive")
        theButton.innerHTML = '<a id="whatIcon"><i class="bi bi-whatsapp"></i></a>'
        pressed =false
    }
})

var theButton = document.getElementById("WAButton")
var pressed = false
theButton.addEventListener("click", async function () {
    if (pressed) {
        theButton.classList.remove("WAButtonActive")
        theButton.innerHTML = '<a id="whatIcon"><i class="bi bi-whatsapp"></i></a>'
        pressed =false
    } else {
        theButton.classList.add("WAButtonActive")
        await sleep(300)
        theButton.innerHTML = '<div onclick="copyNumber()" id="wpNumber"><span class="tooltiptext" id="myTooltip">Copiar</span>'+num+'</div><a href="https://web.whatsapp.com/"><button id="whatBut" class="mt-1">Enviar Mensaje</button></a> '
        pressed =true
    }

});
